{"version":3,"file":"0.js","sources":["webpack:///./components/Airline/AirlineDashboard/Cards/AirlineDashboardCard.js","webpack:///./components/Airline/AirlineDashboard/Cards/index.js","webpack:///./components/Airline/AirlineDashboard/Layout/AirlineDashboardLayout.js"],"sourcesContent":["import React from 'react'\nimport { Grid, Dropdown } from '../../../../node_modules/semantic-ui-react'\nimport dynamic from 'next/dynamic'\nimport '../Layout/style.css'\nimport {\n  XYPlot,\n  XAxis,\n  YAxis,\n  VerticalBarSeries,\n  FlexibleXYPlot,\n  HorizontalGridLines,\n  VerticalGridLines\n} from 'react-vis'\nconst airline = [\n  { key: 1, text: 'THA', value: 'THA' },\n  { key: 2, text: 'BKP', value: 'BKP' },\n  { key: 3, text: 'THD', value: 'THD' }\n]\n\nconst defaultY = [\n  { key: 1, text: 'No. of Route ', value: 'NoRoute' },\n  { key: 2, text: 'Seat', value: 'Seat' },\n  { key: 3, text: 'Pax', value: 'Pax' },\n  { key: 4, text: 'Load Factor ', value: 'Load Factor' },\n  { key: 5, text: 'RPK', value: 'RPK' },\n  { key: 6, text: 'Frequency', value: 'Frequency' }\n]\n\nconst DefaultBar = dynamic(() => import('../../../Graph/defaultBar'), {\n  ssr: false\n})\n\nconst AirlineDashboardCard = props => {\n  return (\n    <React.Fragment>\n      <Grid>\n        <Grid.Row textAlign=\"center\">\n          <Grid.Column width={6} />\n          <Grid.Column width={2} verticalAlign=\"middle\">\n            <Dropdown\n              defaultValue=\"THA\"\n              options={airline}\n              name=\"airline\"\n              placeholder=\"Airline\"\n              selection\n              fluid\n              onChange={props.handleDropdown}\n            />\n          </Grid.Column>\n          <Grid.Column width={2} verticalAlign=\"middle\">\n            <Dropdown\n              defaultValue=\"Pax\"\n              options={defaultY}\n              name=\"defaultY\"\n              placeholder=\"Yaxis\"\n              selection\n              fluid\n              onChange={props.handleDropdown}\n            />\n          </Grid.Column>\n        </Grid.Row>\n        <Grid.Row textAlign=\"center\" style={{ paddingTop: '0px' }}>\n          {props.showdefault ? (\n            <Grid.Column>\n              <label className=\"header-label\">{props.state.defaultY}</label>\n            </Grid.Column>\n          ) : null}\n        </Grid.Row>\n        <Grid.Row textAlign=\"center\" style={{ paddingBottom: '0px' }}>\n          <Grid.Column\n            style={{\n              display: 'flex',\n              justifyContent: 'center'\n            }}\n          >\n            {props.state.showdefault ? (\n              <DefaultBar\n                data={props.state.defaultGraph}\n                xTitle=\"Year\"\n                yTitle={props.defaultY}\n              />\n            ) : null}\n            {/* <DefaultBar\n              data={props.state.defaultGraph}\n              xTitle=\"Year\"\n              yTitle={props.defaultY}\n            /> */}\n          </Grid.Column>\n        </Grid.Row>\n        {props.state.showdefault ? (\n          <Grid.Row textAlign=\"center\" style={{ paddingTop: '0px' }}>\n            <Grid.Column>\n              <label className=\"text-label\">Year</label>\n            </Grid.Column>\n          </Grid.Row>\n        ) : null}\n      </Grid>\n    </React.Fragment>\n  )\n}\n\nexport { AirlineDashboardCard }\n","export * from './AirlineDashboardCard'\n","import React, { Component } from 'react'\nimport { AirlineDashboardCard } from '../Cards'\nimport dynamic from 'next/dynamic'\n\nclass AirlineDashboardLayout extends Component {\n  state = {\n    y2017: null,\n    airline: 'THA',\n    defaultY: 'Pax',\n    data: null,\n    defaultY2017: null,\n    pax: [],\n    frequency: [],\n    defaultGraphX: ['2013', '2014', '2015', '2016', '2017'],\n    defaultGraphY: [],\n    showdefault: false,\n    defaultGraph: [\n      { x: '2013', y: 0 },\n      { x: '2014', y: 0 },\n      { x: '2015', y: 0 },\n      { x: '2016', y: 0 },\n      { x: '2017', y: 0 }\n    ],\n    query: 'Test query'\n  }\n\n  componentDidMount = () => {\n    this.getDataYearByAirline(this.state.airline)\n  }\n\n  handleDropdown = (e, data) => {\n    this.setState({ [data.name]: data.value })\n    this.forceUpdate()\n    if (data.name === 'defaultY') {\n      this.filterDefaultGraph(this.state.airline, data.value)\n    }\n    if (data.name === 'airline' && this.state.defaultY !== null) {\n      this.filterDefaultGraph(data.value, this.state.defaultY)\n    }\n  }\n\n  filterDefaultGraph = (airline, status) => {\n    this.state.showdefault = true\n    if (status === 'Pax') {\n      this.getDataYearByAirline(airline)\n    }\n    if (status === 'Frequency') {\n      let count = 0\n      for (let i = 0; i < this.state.y2017.data.length; i++) {\n        if (this.state.y2017.data[i].OWNER_CODE === airline) {\n          count = count + 1\n        }\n        this.state.frequency[4] = count\n        this.state.defaultGraphY[4] = count\n        this.state.defaultGraph[4].y = count\n      }\n    }\n\n    if (status === 'Seat') {\n      let seat = 0\n      for (let i = 0; i < this.state.y2017.data.length; i++) {\n        if (this.state.y2017.data[i].OWNER_CODE === airline) {\n          seat = seat + this.state.y2017.data[i].SEATS\n        }\n        this.state.defaultGraph[4].y = seat\n      }\n    }\n    this.forceUpdate()\n  }\n\n  //   test = () => {\n  //     fetch('http://localhost:4000/test', {\n  //       method: 'POST',\n  //       headers: {\n  //         'Content-Type': 'application/json',\n  //         Accept: 'text/plain'\n  //       },\n  //       body: JSON.stringify({\n  //         query: this.state.query\n  //       })\n  //     })\n  //       .then(res => res.json())\n  //       .then(data => {\n  //         console.log(data)\n  //         this.forceUpdate()\n  //       })\n  //   }\n\n  getDataYearByAirline = airline => {\n    console.log('Get Airport!')\n    fetch('http://localhost:4000/YearPaxByAirline', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'text/plain'\n      },\n      body: JSON.stringify({\n        airline: airline\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log(data)\n        this.setDefaultGraphData(data.data)\n\n        this.forceUpdate()\n      })\n  }\n\n  setDefaultGraphData = data => {\n    for (let i = 0; i < data.length; i++) {\n      this.state.defaultGraph[data.length - 1 - i].y = data[i].TotalPax\n      console.log(data[i].TotalPax)\n    }\n    this.setState({ showdefault: true })\n  }\n\n  render() {\n    // console.log(this.state.pax[4])\n    // console.log(this.state.frequency[4])\n    console.log(this.state.defaultGraph)\n\n    return (\n      <div className=\"section-dashboard\">\n        <AirlineDashboardCard\n          handleDropdown={this.handleDropdown}\n          state={this.state}\n          updateGraph={this.updateGraph}\n        />\n      </div>\n    )\n  }\n}\n\nexport default AirlineDashboardLayout\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AASA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;;;;;;;;;;;ACpGA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAlBA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AADA;AANA;AAUA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AA/HA;AACA;AAiIA;;;;;;;;;;;;;;;A","sourceRoot":""}