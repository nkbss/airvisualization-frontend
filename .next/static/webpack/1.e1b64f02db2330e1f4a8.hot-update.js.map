{"version":3,"file":"static/webpack/1.e1b64f02db2330e1f4a8.hot-update.js","sources":["webpack:///./components/Airline/AirlineDashboard/Layout/AirlineDashboardLayout.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { AirlineDashboardCard } from '../Cards'\nimport dynamic from 'next/dynamic'\n\nclass AirlineDashboardLayout extends Component {\n  state = {\n    y2017: null,\n    airline: 'THA',\n    defaultY: null,\n    data: null,\n    defaultY2017: null,\n    pax: [],\n    frequency: [],\n    defaultGraphX: ['2013', '2014', '2015', '2016', '2017'],\n    defaultGraphY: [],\n    showdefault: false,\n    defaultGraph: [\n      { x: '2013', y: 0 },\n      { x: '2014', y: 0 },\n      { x: '2015', y: 0 },\n      { x: '2016', y: 0 },\n      { x: '2017', y: 0 }\n    ],\n    query: 'Test query'\n  }\n\n  componentDidMount = () => {\n    this.getData()\n  }\n\n  handleDropdown = (e, data) => {\n    this.setState({ [data.name]: data.value })\n    this.forceUpdate()\n    if (data.name === 'defaultY') {\n      this.filterDefaultGraph(this.state.airline, data.value)\n    }\n    if (data.name === 'airline' && this.state.defaultY !== null) {\n      this.filterDefaultGraph(data.value, this.state.defaultY)\n    }\n  }\n\n  filterDefaultGraph = (airline, status) => {\n    this.state.showdefault = true\n    if (status === 'Pax') {\n      // let pax = 0\n      // for (let i = 0; i < this.state.y2017.data.length; i++) {\n      //   if (this.state.y2017.data[i].OWNER_CODE === airline) {\n      //     pax = pax + this.state.y2017.data[i].PAX_TOTAL\n      //   }\n      //   this.state.pax[4] = pax\n      //   this.state.defaultGraphY[4] = pax\n      //   this.state.defaultGraph[4].y = pax\n      // }\n    }\n    if (status === 'Frequency') {\n      let count = 0\n      for (let i = 0; i < this.state.y2017.data.length; i++) {\n        if (this.state.y2017.data[i].OWNER_CODE === airline) {\n          count = count + 1\n        }\n        this.state.frequency[4] = count\n        this.state.defaultGraphY[4] = count\n        this.state.defaultGraph[4].y = count\n      }\n    }\n\n    if (status === 'Seat') {\n      let seat = 0\n      for (let i = 0; i < this.state.y2017.data.length; i++) {\n        if (this.state.y2017.data[i].OWNER_CODE === airline) {\n          seat = seat + this.state.y2017.data[i].SEATS\n        }\n        this.state.defaultGraph[4].y = seat\n      }\n    }\n    this.forceUpdate()\n  }\n\n  //   test = () => {\n  //     fetch('http://localhost:4000/test', {\n  //       method: 'POST',\n  //       headers: {\n  //         'Content-Type': 'application/json',\n  //         Accept: 'text/plain'\n  //       },\n  //       body: JSON.stringify({\n  //         query: this.state.query\n  //       })\n  //     })\n  //       .then(res => res.json())\n  //       .then(data => {\n  //         console.log(data)\n  //         this.forceUpdate()\n  //       })\n  //   }\n\n  getData = () => {\n    console.log('Get Airport!')\n    fetch('http://localhost:4000/YearPaxByAirline', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'text/plain'\n      },\n      body: JSON.stringify({\n        airline: 'BKP'\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log(data)\n        this.setDefaultGraphData(data.data)\n\n        this.forceUpdate()\n      })\n  }\n\n  setDefaultGraphData = data => {\n    for (let i = 0; i < data.length; i++) {\n      this.state.defaultGraph[data.length - 1 - i].y = data[i].TotalPax\n      console.log(data[i].TotalPax)\n    }\n    this.setState({ showdefault: true })\n  }\n\n  render() {\n    // console.log(this.state.pax[4])\n    // console.log(this.state.frequency[4])\n    console.log(this.state.defaultGraph)\n\n    return (\n      <div className=\"section-dashboard\">\n        <AirlineDashboardCard\n          handleDropdown={this.handleDropdown}\n          state={this.state}\n          updateGraph={this.updateGraph}\n        />\n      </div>\n    )\n  }\n}\n\nexport default AirlineDashboardLayout\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAlBA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AADA;AANA;AAUA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AAvIA;AACA;AAyIA;;;;A","sourceRoot":""}